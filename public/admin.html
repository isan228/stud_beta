<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#2563eb">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - stud.kg</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="/"><h1>STUD.kg</h1></a>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="–ú–µ–Ω—é">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-menu" id="navMenu">
                <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/admin" class="nav-link active">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
                <div class="nav-actions">
                    <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                        <span class="theme-icon">üåô</span>
                    </button>
                    <button class="btn btn-logout" id="logoutBtn">–í—ã—Ö–æ–¥</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div id="adminLoginPage" class="admin-page">
            <div class="container">
                <div class="auth-container">
                    <h2>–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                    <form id="adminLoginForm" class="auth-form">
                        <div class="form-group">
                            <label for="adminUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                            <input type="text" id="adminUsername" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="adminPassword">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="adminPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">–í–æ–π—Ç–∏</button>
                    </form>
                </div>
            </div>
        </div>

        <div id="adminDashboardPage" class="admin-page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                    <p class="page-description">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π STUD.kg</p>
                </div>

                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="dashboard">–î–∞—à–±–æ—Ä–¥</button>
                    <button class="admin-tab" data-tab="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                    <button class="admin-tab" data-tab="subjects">–ü—Ä–µ–¥–º–µ—Ç—ã</button>
                    <button class="admin-tab" data-tab="tests">–¢–µ—Å—Ç—ã</button>
                    <button class="admin-tab" data-tab="questions">–í–æ–ø—Ä–æ—Å—ã</button>
                </div>

                <!-- –î–∞—à–±–æ—Ä–¥ -->
                <div id="dashboardTab" class="admin-tab-content active">
                    <div class="admin-stats-grid">
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">üë•</div>
                            <div class="admin-stat-info">
                                <div class="admin-stat-value" id="statTotalUsers">0</div>
                                <div class="admin-stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">üìö</div>
                            <div class="admin-stat-info">
                                <div class="admin-stat-value" id="statTotalSubjects">0</div>
                                <div class="admin-stat-label">–ü—Ä–µ–¥–º–µ—Ç–æ–≤</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">üìù</div>
                            <div class="admin-stat-info">
                                <div class="admin-stat-value" id="statTotalTests">0</div>
                                <div class="admin-stat-label">–¢–µ—Å—Ç–æ–≤</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">‚ùì</div>
                            <div class="admin-stat-info">
                                <div class="admin-stat-value" id="statTotalQuestions">0</div>
                                <div class="admin-stat-label">–í–æ–ø—Ä–æ—Å–æ–≤</div>
                            </div>
                        </div>
                        <div class="admin-stat-card">
                            <div class="admin-stat-icon">üìä</div>
                            <div class="admin-stat-info">
                                <div class="admin-stat-value" id="statTotalResults">0</div>
                                <div class="admin-stat-label">–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>
                            </div>
                        </div>
                    </div>

                    <div class="admin-recent-section">
                        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                        <div id="recentUsersList" class="admin-list"></div>
                    </div>

                    <div class="admin-recent-section">
                        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                        <div id="recentResultsList" class="admin-list"></div>
                    </div>
                </div>

                <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
                <div id="usersTab" class="admin-tab-content">
                    <div class="admin-section-header">
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                        <div class="admin-search">
                            <input type="text" id="usersSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ email...">
                        </div>
                    </div>
                    <div id="usersList" class="admin-table-container"></div>
                    <div id="usersPagination" class="admin-pagination"></div>
                </div>

                <!-- –ü—Ä–µ–¥–º–µ—Ç—ã -->
                <div id="subjectsTab" class="admin-tab-content">
                    <div class="admin-section-header">
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏</h2>
                        <button class="btn btn-primary" id="addSubjectBtn">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç</button>
                    </div>
                    <div id="subjectsList" class="admin-list"></div>
                </div>

                <!-- –¢–µ—Å—Ç—ã -->
                <div id="testsTab" class="admin-tab-content">
                    <div class="admin-section-header">
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏</h2>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <select id="testsSubjectFilter" class="form-group input">
                                <option value="">–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã</option>
                            </select>
                            <button class="btn btn-primary" id="addTestBtn">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç</button>
                        </div>
                    </div>
                    <div id="testsList" class="admin-list"></div>
                </div>

                <!-- –í–æ–ø—Ä–æ—Å—ã -->
                <div id="questionsTab" class="admin-tab-content">
                    <div class="admin-section-header">
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞–º–∏</h2>
                        <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                            <select id="questionsTestFilter" class="form-group input">
                                <option value="">–í—Å–µ —Ç–µ—Å—Ç—ã</option>
                            </select>
                            <button class="btn btn-primary" id="addQuestionBtn">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                            <button class="btn btn-secondary" id="uploadPdfBtn">üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ PDF</button>
                        </div>
                    </div>
                    <div id="questionsList" class="admin-list"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="subjectModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2 id="subjectModalTitle">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç</h2>
            <form id="subjectForm">
                <input type="hidden" id="subjectId">
                <div class="form-group">
                    <label for="subjectName">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="subjectName" required>
                </div>
                <div class="form-group">
                    <label for="subjectDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="subjectDescription" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <div id="testModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2 id="testModalTitle">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç</h2>
            <form id="testForm">
                <input type="hidden" id="testId">
                <div class="form-group">
                    <label for="testName">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="testName" required>
                </div>
                <div class="form-group">
                    <label for="testSubjectId">–ü—Ä–µ–¥–º–µ—Ç</label>
                    <select id="testSubjectId" required></select>
                </div>
                <div class="form-group">
                    <label for="testDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="testDescription" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <div id="pdfUploadModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <span class="modal-close">&times;</span>
            <h2>üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–∑ PDF</h2>
            <form id="pdfUploadForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="pdfTestId">–¢–µ—Å—Ç</label>
                    <select id="pdfTestId" required></select>
                </div>
                <div class="form-group">
                    <label for="pdfFile">PDF —Ñ–∞–π–ª</label>
                    <input type="file" id="pdfFile" accept=".pdf" required>
                    <small style="color: var(--text-muted); display: block; margin-top: 0.5rem; line-height: 1.5;">
                        <strong>–§–æ—Ä–º–∞—Ç PDF:</strong><br>
                        1. –í–æ–ø—Ä–æ—Å?<br>
                        A) –û—Ç–≤–µ—Ç 1<br>
                        B) –û—Ç–≤–µ—Ç 2<br>
                        C) –û—Ç–≤–µ—Ç 3<br>
                        D) –û—Ç–≤–µ—Ç 4<br>
                        –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: A
                    </small>
                </div>
                <div id="pdfUploadProgress" style="display: none; margin: 1rem 0;">
                    <div style="background: var(--bg-secondary); border-radius: var(--radius); padding: 0.25rem; height: 24px;">
                        <div id="pdfUploadProgressBar" style="background: linear-gradient(90deg, var(--primary-color), var(--primary-light)); height: 100%; border-radius: var(--radius); width: 0%; transition: width 0.3s; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.75rem; font-weight: 600;"></div>
                    </div>
                    <p id="pdfUploadStatus" style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.9rem; text-align: center;">–û–±—Ä–∞–±–æ—Ç–∫–∞...</p>
                </div>
                <button type="submit" class="btn btn-primary">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <div id="questionModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px;">
            <span class="modal-close">&times;</span>
            <h2 id="questionModalTitle">–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</h2>
            <form id="questionForm">
                <input type="hidden" id="questionId">
                <div class="form-group">
                    <label for="questionText">–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</label>
                    <textarea id="questionText" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="questionTestId">–¢–µ—Å—Ç</label>
                    <select id="questionTestId" required></select>
                </div>
                <div class="form-group">
                    <label>–û—Ç–≤–µ—Ç—ã</label>
                    <div id="answersList"></div>
                    <button type="button" class="btn btn-secondary" id="addAnswerBtn">+ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                </div>
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <div id="notification" class="notification"></div>
    <script src="admin.js"></script>
    <script src="app.js"></script>
</body>
</html>

